<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>{{ document.title }}</title>
</head>
<body>

<h1>{{ document.title }}</h1>

<!-- ========================= -->
<!-- 作者の意図（Intent） -->
<!-- ========================= -->

<h2>作者の意図（Intent）</h2>

<form method="post" action="/document/{{ document.id }}/intent">

  <!-- 既存Intent -->
{% for key, field in document.intent.fields.items() %}
  <div style="margin-bottom:10px;">
    <label>{{ field.label }}</label><br>

    <input
      type="text"
      name="intent_value_{{ key }}"
      value="{{ field.value }}"
      style="width:85%;"
    >

    <button type="submit"
            name="remove_intent"
            value="{{ key }}">
      削除
    </button>
  </div>
{% endfor %}


  <hr>

  <!-- Intent追加 -->
  <h4>Intent項目を追加</h4>

  <input
    type="text"
    name="new_intent_label"
    placeholder="項目名（例：世界観）"
    style="width:30%;"
  >

  <input
    type="text"
    name="new_intent_value"
    placeholder="内容"
    style="width:55%;"
  >

  <br><br>

  <button type="submit" name="add_intent" value="1">
    ＋ Intentを追加
  </button>

  <br><br>

  <button type="submit" name="save_intent" value="1">
    Intentを保存
  </button>

</form>

<hr>

<!-- ========================= -->
<!-- シーン（Unit） -->
<!-- ========================= -->

<<h2>シーン</h2>

<form method="post">

  {% for unit in document.units %}
    <h3>{{ unit.title }}</h3>

    <textarea
      name="unit_{{ loop.index0 }}"
      rows="6"
      style="width:100%;"
    >{{ unit.content }}</textarea>
  {% endfor %}

  <br>
  <button type="submit">保存</button>
</form>

<hr>

<p><a href="/dashboard">← ダッシュボードへ</a></p>

</body>
</html>
