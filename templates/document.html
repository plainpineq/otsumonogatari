<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>{{ document.title }}</title>
</head>
<body>

<h1>{{ document.title }}</h1>

<!-- ========================= -->
<!-- 作者の意図（Intent） -->
<!-- ========================= -->

<h2>作者の意図（Intent）</h2>

<form method="post" action="/document/{{ document.id }}/intent">

  {% for field in document.intent.fields %}
    <div style="margin-bottom:10px;">
      <input type="hidden" name="intent_key" value="{{ field.key }}">

      <label>{{ field.label }}</label><br>
      <input
        type="text"
        name="intent_value_{{ field.key }}"
        value="{{ field.value }}"
        style="width:90%;"
      >

      <button name="remove_intent" value="{{ field.key }}">削除</button>
    </div>
  {% endfor %}

  <hr>

  <h4>Intent項目を追加</h4>
  <input type="text" name="new_intent_label" placeholder="項目名">
  <input type="text" name="new_intent_value" placeholder="内容">

  <br><br>
  <button type="submit">Intentを保存</button>
</form>

<hr>

<!-- ========================= -->
<!-- シーン（Unit）編集 -->
<!-- ========================= -->

<h2>シーン</h2>

<form method="post">

  {% for category in document.categories %}
    {% if category.name == "シーン" %}

      {% for element in category.elements %}
        <h3>{{ element.name }}</h3>

        {% for unit in element.instances %}
          <textarea
            name="unit_{{ loop.index0 }}"
            rows="6"
            style="width:100%;"
          >{{ unit.content }}</textarea>
        {% endfor %}

      {% endfor %}

    {% endif %}
  {% endfor %}

  <br>
  <button type="submit">保存</button>
</form>

<hr>

<p><a href="/dashboard">← ダッシュボードへ</a></p>

</body>
</html>
